# HEALTH CHEAKER SCRIPT


**`health_checker.sh`** - универсальный bash-скрипт для проверки важных системных служб. Скрипт выполняет диагностику сети, системы, проверяет файлы, службы для работы с базами данных. Результаты выводятся в терминал и сохраняются в лог-файлы для дальнейшего анализа.

---

## **Содержание**

1. [Описание](#описание)
2. [Требования](#требования)
3. [Установка](#установка)
4. [Использование](#использование)
5. [Настройка](#настройка)
6. [Примеры](#примеры)
7. [Логирование](#логирование)
8. [Лицензия](#лицензия)

---

## Описание

Скрипт **`health_checker.sh`** предоставляет следующие возможности:
- **Диагностика сети**: проверка доступности сети и DNS разрешения
- **Диски**: информация о свободном месте на дисках
- **Целостность файлов**: выборочная проверка файла на внутренние ошибки
- **Оперативная память**: Использование RAM.
- **Службы**: Состояние ключевых служб (SSH, HTTPD, MySQL).
- **MySQL**: Проверка подключения к серверу базы данных.

Результаты выполнения выводятся с выделением в терминал и записываются в **лог-файл** (**`system_check.log`**) для дальнейшего анализа

---

## Требования

Для работы скрипта необходимы:
- Операционная система: **Linux**.
- Интерпретатор: **Bash** (версия 4.0 или выше).
- Права администратора (**sudo**) для выполнения команды `fsck`.
- Установленные утилиты:
  - `ping`, `nslookup`, `df`, `top`, `free`, `systemctl`, `mysqladmin`.

---

## **Установка**

### 1. Клонируйте репозиторий
```bash
git clone https://github.com/your-repo/system_check.git
cd system_check
```

### 2. Сделайте скрипт исполняемым
Выполните команду:
```bash
chmod +x system_check.sh
```

### 3. Убедитесь, что все зависимости установлены
Проверьте наличие необходимых утилит. Если какая-либо из них отсутствует, установите её:
```bash
sudo apt update && sudo apt install dnsutils mysql-client
```

---

## **Использование**

Запустите скрипт:
```bash
./system_check.sh
```

Если требуется выполнение команд с правами администратора (например, `fsck`), используйте:
```bash
sudo ./system_check.sh
```

---

## **Настройка**

### 1. Изменение проверяемых служб
Отредактируйте массив `services` в скрипте:
```bash
services=(ssh httpd mysql)
```
Например, добавьте или удалите службы:
```bash
services=(ssh nginx postgresql)
```

### 2. Настройка параметров MySQL
Измените строку проверки MySQL, если используется другой пользовательский аккаунт или пароль:
```bash
if mysqladmin ping -u root -padmin > /dev/null 2>&1; then
```
Пример:
```bash
if mysqladmin ping -u myuser -pmypassword > /dev/null 2>&1; then
```

---

## **Примеры**

### Пример 1: Полная проверка системы
Запустите скрипт:
```bash
sudo ./system_check.sh
```

Пример вывода:
```
--- Проверка сети ---

[+] Интернет доступен

--- Проверка DNS ---

[+] DNS работает

--- Проверка свободного места ---

Диск: /dev/sda1
Память: 50G
Занято: 20G

--- Проверка целостности ---

[+] Система в полном порядке

--- Проверка загрузки процессора ---

Загрузка процессора - 15.3%

--- Мониторинг оперативной памяти ---

Всего: 8.0G
Занято: 3.5G
Свободно: 4.5G

--- Проверка служб ---

[+] Служба ssh активна
[-] Служба httpd неактивна
[+] Служба mysql активна

--- Проверка сервера MySQL ---

[+] MySQL - Подключение успешно
```

---

## **Логирование**

Все действия и результаты проверок записываются в файл `system_check.log`. Формат записи:
```
ГГГГ-ММ-ДД ЧЧ:ММ:СС - Сообщение
```

Пример содержимого лога:
```
2023-10-10 14:23:45 - Проверка сети
2023-10-10 14:23:46 - Интернет доступен
2023-10-10 14:23:47 - Проверка DNS
2023-10-10 14:23:48 - DNS работает
2023-10-10 14:23:49 - Диск: /dev/sda1 - Память: 50G - Занято: 20G
2023-10-10 14:23:50 - Система в полном порядке
2023-10-10 14:23:51 - Загрузка процессора - 15.3%
2023-10-10 14:23:52 - Всего: 8.0G - Занято: 3.5G - Свободно: 4.5G
2023-10-10 14:23:53 - Служба ssh активна
2023-10-10 14:23:54 - Служба httpd неактивна
2023-10-10 14:23:55 - Служба mysql активна
2023-10-10 14:23:56 - MySQL - Подключение успешно
```

---

## **Лицензия**

Этот проект распространяется под лицензией **MIT**. Подробности см. в файле [LICENSE](LICENSE).

---

## **Контакты**

Если у вас есть вопросы или предложения, свяжитесь со мной:
- Email: your-email@example.com
- GitHub: [@your-github](https://github.com/your-github)

---

### **Благодарности**

- [Bash Documentation](https://www.gnu.org/software/bash/)
- [Markdown Guide](https://www.markdownguide.org/)

---

> **Примечание:** Этот скрипт разработан для образовательных и рабочих целей. Используйте его на свой страх и риск.

---
